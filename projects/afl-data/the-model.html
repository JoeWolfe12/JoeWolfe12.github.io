---
layout: default
title: The Model
permalink: /projects/afl-data/the-model
---
<script id="scatter-data" type="application/json">
{
  "actual": [21.0, 67.0, 23.0, -61.0, 67.0, 18.0, -24.0, -71.0, 28.0, -29.0, -50.0, -6.0, 61.0, -41.0, 24.0, 33.0, -56.0, -8.0, -58.0, -98.0, -35.0, 7.0, -44.0, 24.0, 10.0, -37.0, -19.0, -35.0, -28.0, 7.0, -17.0, 7.0, 17.0, 86.0, -19.0, -13.0, 70.0, 58.0, -17.0, 2.0, -70.0, -10.0, -98.0, -18.0, -4.0, -48.0, 35.0, -3.0, -59.0, -21.0, 16.0, 56.0, -105.0, 49.0, 40.0, 19.0, -81.0, -9.0, 4.0, 1.0, 115.0, 8.0, 67.0, -86.0, 41.0, 92.0, 69.0, 4.0, 22.0, 15.0, -70.0, 38.0, 19.0, 12.0, 63.0, -8.0, 117.0, -2.0, 37.0, -38.0, 81.0, 33.0, 1.0, 5.0, 7.0, 44.0, 53.0, -74.0, 120.0, -57.0, 1.0, -30.0, -20.0, 58.0, -11.0, 165.0, -14.0, 139.0, -25.0, 21.0, -22.0, -7.0, -1.0, -24.0, -39.0, -20.0, 25.0, 9.0, 83.0, 40.0, -28.0, -10.0, -29.0, 76.0, 65.0, -4.0, 8.0, 39.0, 30.0, -35.0, -41.0, -30.0, 32.0, -38.0, 0.0, 32.0, -1.0, -43.0, 26.0, 3.0, 17.0, 62.0, -2.0, 71.0, 47.0, -87.0, 42.0, 13.0, 13.0, 25.0, -12.0, -51.0, 66.0, -25.0, 29.0, 23.0, 27.0, -28.0, -31.0, -3.0, 67.0, 1.0, -13.0, 65.0, -82.0, -41.0, -49.0, -17.0, 35.0, 29.0, -108.0, 5.0, 27.0, -9.0, 98.0, -48.0, -13.0, 48.0, -21.0, -87.0, 10.0, -30.0, 56.0, 3.0, 29.0, -3.0, 3.0, 0.0, -63.0, 41.0, -26.0, 87.0, -28.0, -31.0, 30.0, 21.0, -16.0, 59.0, -42.0, 16.0, -67.0, 2.0, 10.0, -27.0, -5.0, 93.0, -17.0, -12.0, 40.0, 94.0, 30.0, 7.0, 24.0, 35.0, -72.0, 23.0, 24.0, -62.0, -24.0, -38.0, 162.0, -63.0, 36.0, -2.0, -29.0, 27.0, 33.0, 0.0, 6.0, 9.0, 28.0, -78.0, 17.0, 32.0, -19.0, -4.0, -3.0, -6.0, 50.0, 31.0, -29.0, -14.0, 71.0, 81.0, 27.0, -7.0, -48.0, -5.0, 11.0, -12.0, 68.0, -33.0, 3.0, -66.0, 47.0, 8.0, 1.0, 2.0, -24.0, 36.0, 57.0, 66.0, -14.0, 38.0, 20.0, 87.0, 39.0, -69.0, -63.0, 69.0, 41.0, -7.0, 48.0, -2.0, -2.0, 54.0, 71.0, 32.0, -28.0, -20.0, 41.0, 21.0, -27.0, -26.0, 5.0, 69.0, 88.0, -29.0, 8.0, -54.0, -40.0, 2.0, 61.0, -21.0, -1.0, 18.0, -10.0, 43.0, -50.0, -65.0, -14.0, 21.0, -36.0, -46.0, 16.0, -52.0, 66.0, 41.0, 43.0, -32.0, -47.0, 13.0, -59.0, -8.0, -32.0, 16.0, 4.0, -96.0, -35.0, 97.0, 1.0, -58.0, 98.0, -8.0, -14.0, -1.0, 11.0, -20.0, 44.0, 68.0, 28.0, 10.0, 129.0, 28.0, 33.0, 34.0, 4.0, -2.0, -42.0, 22.0, 36.0, -44.0, 5.0, -20.0, 29.0, -41.0, -4.0, 52.0, -36.0, -51.0, 8.0, -50.0, -5.0, -8.0, 2.0, -7.0, -37.0, 64.0, 61.0, -24.0, -60.0, 18.0, 50.0, 29.0, -59.0, 38.0, -29.0, -43.0, 65.0, -17.0, 31.0, -15.0, 0.0, 32.0, 7.0, 0.0, -3.0, 74.0, 20.0, 14.0, -58.0, 7.0, -68.0, 16.0, 16.0, 61.0, -12.0, -33.0, 112.0, -26.0, -35.0, 24.0, -19.0, 63.0, 12.0, 60.0, 10.0, 18.0, 30.0, 77.0, 6.0, -48.0, -4.0, -44.0, 7.0, -26.0, 13.0, 47.0, -48.0, -12.0, 1.0, -75.0, 52.0, -52.0, -44.0, 45.0, 10.0, -13.0, 62.0, 81.0, -13.0, 0.0, 17.0, 8.0, -55.0, 11.0, 6.0, -16.0, 6.0, 14.0, -32.0, 56.0, -51.0, -45.0, 53.0, -7.0, 34.0, 37.0, 58.0, 5.0, 51.0, 62.0, 71.0, -67.0, 48.0, -2.0, 49.0, -6.0, -70.0, -28.0, 44.0, -3.0, 28.0, 15.0, -22.0, 1.0, -11.0, 3.0, -6.0, -53.0, 18.0, 59.0, 45.0, 5.0, 45.0, -20.0, 48.0, 55.0, 2.0, 53.0, -15.0, 39.0, -10.0, 32.0, 42.0, 3.0, -34.0, 21.0, 19.0, -6.0, -22.0, -19.0, -9.0, -14.0, -54.0, 77.0, -13.0, -4.0, -2.0, -48.0, 46.0, 42.0, -43.0, 61.0, 22.0, -22.0, 38.0, 5.0, 1.0, -54.0, -39.0, 25.0, -28.0, -12.0, 86.0, -4.0, -23.0, 5.0, 51.0, -49.0, 27.0, 96.0, -42.0, 16.0, 8.0, -27.0, -9.0, 25.0, -47.0, -2.0, 75.0, -39.0, -32.0, -39.0, 108.0, -20.0, -16.0, 95.0, 19.0, 0.0, 112.0, 39.0, 95.0, -5.0, 19.0, -31.0, -42.0, 41.0, 25.0, -20.0, 81.0, 31.0, -34.0, -11.0, -37.0, 30.0, -39.0, 124.0, -69.0, 42.0, -8.0, -9.0, 37.0, 2.0, 50.0, -18.0, 9.0, -21.0, 40.0, -13.0, 41.0, -52.0, 73.0, 21.0, 55.0, -38.0, 76.0, 35.0, 34.0, 51.0, 12.0, 102.0, -19.0, -26.0, 28.0, 56.0, -35.0, -17.0, -21.0, 75.0, 30.0, -18.0, 0.0, 73.0, -21.0, -56.0, 17.0, -32.0, 29.0, 47.0, 3.0, 77.0, -5.0, 44.0, 44.0, 48.0, 55.0, -12.0, 38.0, -4.0, 171.0, -22.0, -45.0, -67.0], 
  "predicted": [20.79892166951056, 33.284316958950456, 3.168008122535153, -9.404909434991119, 0.17347675263251405, 11.905568072143428, -15.195488257658699, -56.47306008630522, 26.883296486835043, -8.44125769613218, -27.578141410768314, 16.503887795900468, 55.46476274056169, -9.530586984917374, -13.447084714883875, 44.326811342309774, -34.258767007745206, -14.469653980864653, -16.794008593496454, -41.53350478189985, -39.99970560748753, 44.65340580557577, 13.037562497153743, -8.762449565839134, 20.809604254657316, -10.022159989713884, -0.39170180482609673, -1.7091288085704406, 32.500987037439046, 10.74829222918974, 10.933472730221528, 2.750906869587374, 30.501913569836777, -4.509658543235823, -0.2752085212957929, -6.428013024621808, 17.145554676095685, 0.4584719190263238, -1.1551912479377116, -31.365279741697744, -25.56625196804313, 13.466857833334618, -9.649436655597139, -5.193918971997244, -6.5211225239330455, -13.21182199535792, 31.185819214336515, 1.373757144860158, -13.181679991191633, -20.81372472374113, 3.850986818954688, 17.079627145646498, -30.589910662341527, 25.508029660690635, -13.510244283946406, -5.671274837678873, -25.883702901633978, -6.0736962520239475, 23.490454820433467, 9.835407906521368, 36.223340603642036, 19.467430185371214, 16.91666182931663, 12.664019748518598, -13.728551758579442, 24.05096953229857, 7.030928507051995, -18.26082195833352, 26.359361719979024, 22.493894889526985, -9.877966059766003, 25.458510660257716, 9.00352643021533, -18.617871320010018, 21.81796891234828, 9.712945621298928, 31.47266319939725, 14.675028863297314, 26.796130006007093, -22.979193467733886, 53.36051097999663, 19.986959339747568, -8.254661576213365, -4.231291895866155, 34.40586226917851, -1.1764665230414204, 19.41974918614132, -29.01652970883487, 34.117703954676884, 10.172022387950904, 9.052917120023338, -30.925303144172357, -25.69210915181678, 34.1442916809444, -6.396682499927885, 63.84762520445824, 16.527009491547314, 35.18117737826596, -13.001649491328891, 12.219288445112458, 3.2628434723370736, -31.315622851571295, -12.822048747914412, 18.79046347862201, -22.1249796278353, -9.783569771606324, 18.668565870271937, 16.079064903046845, 31.760488053234102, -11.608635246847204, 6.269704709843082, 14.57209942488823, 9.091871727649703, 40.39356594639306, 22.65351103019369, 5.391596623800946, 7.5685808718720615, 75.86560799211621, 38.62601612721143, 23.713637799139008, -34.76398423747318, -33.15272517307046, -14.186114799855968, 0.8288722309144658, 1.3083515972595694, 49.839451178639564, -42.19545663321381, -16.184262580776913, 13.894753387379026, -22.66387761032726, 6.222561515750207, 41.60756501849502, 13.479178380306358, 1.948402651393745, 22.93673094612787, -38.2306492311736, 37.39735262544953, 14.142205509383547, -10.678232284015131, 31.956821859258707, -2.0026591896616255, 13.709876926162998, 33.96841576698349, -2.7406267484109748, -5.107784258250992, -6.103794146342826, 1.4660226341418676, 9.026283517181945, 28.47984771242784, 11.371425026718622, 6.7539626484875805, -13.811290902063615, -14.041949492946866, 34.42424644398389, -46.17186873520758, -1.8878483534822577, -46.74405403120571, 3.729420682261967, 16.661204722184152, -15.36241719073281, -18.45944245105918, -23.334501038858733, -7.87340162349085, 1.0663771172622596, 25.27706644173905, -32.46939343746316, -18.524199300361552, 34.45698495697152, -35.57598862455752, -15.24183419584907, -0.18556285585963828, -25.44148985761675, 32.8029626976254, -3.924712491805086, -32.354551918637654, 1.6853300071843211, -25.287087447337363, 6.524855171304202, -15.570458649203406, 6.1883687905873375, 2.2187161196996534, 44.7371371161169, 19.08531289699995, 3.204702208746863, 28.523740084711616, 12.170624273477245, 2.3763084297350767, -26.920113143608962, 22.36440938113934, -3.6567728977454115, 20.469717434627906, 9.901729468584087, 17.61204078219195, -18.85188119309912, 5.1835159595630556, 40.66720993560947, -35.95518200375676, 15.802108072958998, 78.11529514807104, 44.753206696091105, 3.5376897603556303, -39.61217742692905, -8.485532274023008, 19.682167562911633, -31.253505151468172, 15.075327155495156, 26.06468038308716, -27.454653180705836, -18.689138111503407, 6.896189869126643, 87.43599110638556, -32.06294683413045, 15.884243975481752, 40.45888943577613, 3.280641969297281, 38.86582086643898, -10.422115249859452, 40.197564840032086, -1.6936160691768807, 22.614588924987235, 16.328906644546052, -3.1251605016708766, 41.4400151108765, -0.007277389673238321, -8.460847986715212, -19.13343643664014, 6.591246124856125, -0.10040594978487505, -9.730527712238409, 9.267318904092251, 9.883706753914584, -21.090848315294945, 20.882212661703218, 47.54053951785084, 25.55928316513889, 51.08610765316833, 34.816187618824586, 3.6947812266205746, 14.596214828089181, -11.731063807768695, 16.727850696876853, 9.09039616815662, -12.517759622025189, -43.931728434269864, 8.19283756224073, -5.955913923734092, -9.246142266285187, 14.351253110509813, 8.355849971495989, 38.226242286438115, 40.60851285249868, 19.61183581465715, -18.89011893868613, 52.675426791868745, 33.55344725709306, 23.74683019954483, 37.749981476504416, -15.25493609934676, -48.27708235290407, 12.67021262369667, 31.497985469385306, 20.667287450195506, 4.805373484929753, 16.75709131598926, 2.78705841588254, 34.046665310252806, 46.56569430341813, 11.917522739325896, -3.0886849637820886, 3.8816006100840275, 29.15288856018532, 1.6993414495818806, -16.951734135909852, 26.721863785649084, 18.193967907040463, -1.3401301010269169, 25.58051615984398, -32.07545545553019, 13.335705876533904, -17.040273019003184, 24.265379450355486, 19.63173081717383, 3.1465892921988363, -20.88144369354124, 1.5164097252423225, 39.17802388379057, -36.63510430958628, 6.212514355779452, -19.724308734176244, -39.332324564656794, -10.020581197875412, 21.44595599674376, 7.1584925714791, 0.5941094410455836, 9.991596013022289, -54.68321705520229, 32.96693388469713, 4.2659079793209935, 58.5012351815433, -10.675074151142077, -0.7685856842801053, -2.063913748972337, -0.1494366947109702, 15.798981044018234, 2.5001039394992954, 42.16402476025205, 10.039129051883943, -10.633423760592152, 32.003749288260984, 15.86938521720019, 31.321789140602906, -11.774218176134113, 31.172663707512303, 16.82205213778451, -29.003256663628452, 34.919365060691916, -14.634975918916034, 12.258590729395312, 21.681490952803184, 48.68892465260303, -1.9560097568878518, 1.322495376372978, 70.02493366272896, 34.01464957784608, 12.552056086685887, -30.301321722616056, -14.669629751372518, 7.463948280695129, -7.507039798463047, -7.701895871410181, 19.485026153567578, -31.364449681392184, -0.5782949682322505, 8.884081813743238, 25.97508413434573, 21.735046323548897, 23.45612922932992, 2.441117496949137, -10.53940285780412, -15.032243533260885, 15.798704230154136, 9.611189216197957, -5.130002993498256, 5.197120286353779, -34.80109291623502, 23.955527540686788, 17.569499543767936, 2.164896212097476, -7.300583882706843, -27.844224594234376, -39.137227786664255, 17.235893874362812, -3.3797231135827195, 29.921070441780447, -73.02350074380162, 4.553274666823274, -32.251947858989254, -18.168475697407406, -5.701275276580401, 8.660492694289744, 24.53623044871565, 8.1735191254295, 17.765118190753928, 8.605037320642671, -2.975160134402836, -5.992943816203899, 15.451936112020075, 45.76494331342739, -25.014151529057667, -3.890062102091896, -13.737803420531417, 3.3135564678454985, -1.0278044273590616, 18.39840078630233, 23.395037437928764, 53.08536172243744, -20.292622423789936, 25.410949720589056, 71.68546173769731, -26.793434978223925, 17.447759681866483, 19.877493387015875, -43.00641619424368, -17.539619120834438, -23.837821027896446, 53.97284046905284, 14.481914230291274, 41.90822837242995, 12.521498593413561, 23.16869173216582, -0.36020060125889586, 18.95558560169222, 31.163121642182883, 0.9185509086764179, 11.989367869573865, -22.64084403236369, 33.72270570704015, -10.200123539775383, 28.664327158923218, 8.438113317866645, 24.91761570105585, -37.9970922137357, -9.650063127197328, -17.18152659344985, -13.647340928980778, 6.565084604372443, 22.199040237658213, -9.00214098037138, 11.201476691042519, 34.179419072772056, 0.5060525920292878, -32.139968897585675, -2.5978933896568552, 5.400028322446261, 8.394229757931464, 8.940426495333359, 0.8712332352478942, 16.80711229914187, 8.776963796010502, -5.640461664322308, 5.381228332599701, 14.656973876667994, -9.58887960173955, -10.356673836782473, 5.0770840259342735, -9.209036225130216, 46.197071587097554, 7.728338373754798, 23.581730127614552, 17.465881697035368, 22.167841180345132, 27.860567779084075, 38.224580658526044, 4.986761859804349, 5.65474169806483, -19.00124443271614, 4.8837330618709505, -8.935361865623712, -12.304254082284924, -1.8930998474275649, 4.121957944964071, -16.98289760018264, -0.7889597639501753, -25.41908776563514, 17.099375883605973, -7.931234040877281, -18.236114761879886, 11.572696698729057, -8.320425680009684, -8.265795917719867, 8.95006909707583, 5.629460937685164, 6.555310301729779, -10.45985487100305, 17.681826244409702, 15.034179892229126, 54.04032071124865, 55.26761512746546, 17.055110518659273, 62.21606139597278, 2.670053230209743, 36.09290995539862, 28.11254305109413, -1.3172731378198295, 38.80785154874046, -3.0220404905166793, -7.244991074640878, -19.669060905291136, 21.987738899220442, -15.649016862959456, -14.541339878851236, -12.876910750955663, -21.898381159147362, 32.66384782406475, -31.39139369249816, 18.032594364417108, 18.1624073405155, 26.73555438611768, 20.20849378766862, -53.000797459390405, 44.858495389365615, 32.16176107428386, 37.39140340117035, 44.533412776771684, 26.522160152776763, 22.994591991932882, 16.932225426045406, 21.92758504190962, 23.001343666111726, -33.65889412881991, -10.40332546871236, 53.86159530140306, -22.09308451737736, 8.237798682598436, -32.87238742544959, 22.974897848561394, -10.949571269899977, 7.946845731679889, 11.216997806349472, -5.221465184680315, -23.758485641269477, 49.96394596628334, -53.978419468129005, 16.972951006400525, 21.211836535260126, -28.903858196147453, 11.183883706208327, 20.69419428197758, -4.535079240641457, -13.876854476894373, 27.329069266200893, 0.1245279361262357, -14.529493992288163, -26.443379368314755, 47.32201174322516, -5.925514630243257, -17.73867446555811, 31.580802442620087, 70.39658520889228, -46.40350047236181, 4.475280973109301, -13.294725221036064, 64.51590504242694, -3.4398476715889936, -10.053731503784022, -47.79903908470081, -2.81946253844668, 6.550158086191849, 29.5624368203011, 16.67034473030471, 56.473930389022435, 22.39136295048242, -1.9615747984922205, -33.47388578073508, -2.1041099384098025, -6.812751251449346, 10.94437091313409, 52.518708601537924, -26.166330389584108, 55.43780116077406, 32.869251096184456, 7.865065551968223, 18.338880087080906, 7.5462472473404665, 54.32552963117772, 19.581257363886674, 39.940216307266375, -42.03228322217213, 41.588374777511994, -24.50123011091492, 13.945279938688365, -10.575433823166485, 24.54606860800197, 6.256063169196656, 26.221863031193582, 22.380570413983786, 49.278660551622025, -7.972387009219472, -0.08138780992845973, 40.45539955018738, 16.444388730922594, 22.836848731840377, 24.334627103513856, -31.220456030601955, 30.880668148420895, 50.24675057454866, -5.140143470996607, -16.181220105174095, -6.51063122929608, 53.922396491827726, 8.073280536190946, -22.072089425050468, 1.57372794293871, 29.408803888402627, -32.82658534770802, -10.068845418549518, 26.32935299399895, 30.478832982300897, 42.249603478886826, 12.535394877364656, 20.618135743846604, 71.24989716015467, 3.6565031204841145, 4.0061057398765705, 26.999455264116992, 33.27646054199184, 38.041063234052295, -39.432111604474976, 33.07158714141699, -16.625586517609793, 50.60346707278605, -32.6447375641003, -16.582048901111097, -3.6111859947585208]
}
</script>
<div class="page-box">
  <h1>The Model</h1>

  <p>
    Well, now it's time to try and build out a predictive model bringing together all the different aspects I've looked at:
  </p>
  <ul>
    <li><a href="https://elpunce.com/projects/afl-data/age-analysis.html" target="_blank" rel="noopener">Age</a></li>
    <li><a href="https://elpunce.com/projects/afl-data/elo-rating.html" target="_blank" rel="noopener">Team ELO</a></li>
    <li><a href="https://elpunce.com/projects/afl-data/player-profiles-step2.html" target="_blank" rel="noopener">Player impact scores</a></li>
    <li><a href="https://elpunce.com/projects/afl-data/home-ground.html" target="_blank" rel="noopener">Home ground advantage</a></li>
    <li><a href="https://elpunce.com/projects/afl-data/momentum.html" target="_blank" rel="noopener">Team momentum</a></li>
  </ul>

  <p>
    Before getting into the detail of the model and how it went, I want to briefly cover off what I am <b>not</b> including:
  </p>
  <ul>
    <li><strong>Weather:</strong> Analysis showed it didn't have a material impact on the outcome of a game (it had a minor impact in reducing overall scoring which might be linked to a larger likelihood of upsets, but not enough to be material).</li>
    <li><strong>Head to head history between teams:</strong> Analysis showed this was not material, and with team ELO and momentum, I'm already covering enough macro-level variables.</li>
    <li><strong>Geospatial analysis within player impact scores:</strong> The biggest weakness of my player impact score model was that it did not include geospatial analysis (i.e., where a player is on the field and where they move the ball after disposal). I do not have access to this information, and will need to accept it as a limitation.</li>
    <li><strong>Data pre-2010:</strong> I needed to have a cut off at a certain point, and this was it.</li>
  </ul>

  <p>
    When I first started building out this model, my aim was to be able to predict the winner of a game of footy ~80% of the time. Now, footy is an unpredictable sport (<a href="https://elpunce.com/projects/afl-data/predictability.html" target="_blank" rel="noopener">see here</a>), but I had faith I could decipher the indecipherable. So, how did I go?
  </p>

  <p>
    The model made two types of predictions:
  </p>
  <ul>
    <li>The winner of a game</li>
    <li>The margin</li>
  </ul>

  <p>
    The model was able to predict a winner 70.3% of the time. This put it above any of the individual pieces of the model, as well as just picking the home team, but well short of my 80% ambition:
  </p>

  <table>
    <thead>
      <tr>
        <th>Model</th>
        <th>Accuracy (%)</th>
        <th>AUC</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Home team only</td>
        <td>56.6</td>
        <td>N/A</td>
      </tr>
      <tr>
        <td>Older team only</td>
        <td>63.0</td>
        <td>N/A</td>
      </tr>
      <tr>
        <td>Top-down (Model v1)</td>
        <td>61.7</td>
        <td>0.672</td>
      </tr>
      <tr>
        <td>Player-based sum (Model v2a)</td>
        <td>63.7</td>
        <td>0.708</td>
      </tr>
      <tr>
        <td>Player-based sum (Model v2b)</td>
        <td>65.8</td>
        <td>0.714</td>
      </tr>
      <tr>
        <td>ELO (basic, margin-adjusted)</td>
        <td>67.4</td>
        <td>0.737</td>
      </tr>
      <tr>
        <td><strong>The Model</strong></td>
        <td><strong>70.2</strong></td>
        <td><strong>0.773</strong></td>
      </tr>
    </tbody>
  </table>

  <p>
    <strong>AUC (Area Under the Curve)</strong> measures how well the model can rank or separate winners from losers. An AUC of 0.5 means random guessing, while 1.0 is perfect discrimination. My best model’s AUC of 0.773 means that, for a randomly chosen game, the model is about 77% likely to assign a higher probability to the actual winner than to the loser. 
  </p>

  <p>
    I also took a closer look at how well the model could predict games, and it was reasonably accurate. Taking the 2024 season as an example:
  </p>

  <table>
    <caption>Model Confidence and Accuracy (Percentages)</caption>
    <thead>
      <tr>
        <th>How sure?</th>
        <th>Correct (%)</th>
        <th>Wrong (%)</th>
        <th>Grand Total</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>50-60% sure</td>
        <td>57.14</td>
        <td>42.86</td>
        <td>100.00</td>
      </tr>
      <tr>
        <td>60-70% sure</td>
        <td>61.11</td>
        <td>38.89</td>
        <td>100.00</td>
      </tr>
      <tr>
        <td>70-90% sure</td>
        <td>80.00</td>
        <td>20.00</td>
        <td>100.00</td>
      </tr>
      <tr>
        <td>90%+ sure</td>
        <td>100.00</td>
        <td></td>
        <td>100.00</td>
      </tr>
      <tr>
        <td><strong>Grand Total</strong></td>
        <td><strong>69.44</strong></td>
        <td><strong>30.56</strong></td>
        <td><strong>100.00</strong></td>
      </tr>
    </tbody>
  </table>

  <table>
    <caption>Model Confidence and Accuracy (Counts)</caption>
    <thead>
      <tr>
        <th>How sure?</th>
        <th>Correct</th>
        <th>Wrong</th>
        <th>Grand Total</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>50-60% sure</td>
        <td>40</td>
        <td>30</td>
        <td>70</td>
      </tr>
      <tr>
        <td>60-70% sure</td>
        <td>33</td>
        <td>21</td>
        <td>54</td>
      </tr>
      <tr>
        <td>70-90% sure</td>
        <td>60</td>
        <td>15</td>
        <td>75</td>
      </tr>
      <tr>
        <td>90%+ sure</td>
        <td>17</td>
        <td></td>
        <td>17</td>
      </tr>
      <tr>
        <td><strong>Grand Total</strong></td>
        <td><strong>150</strong></td>
        <td><strong>66</strong></td>
        <td><strong>216</strong></td>
      </tr>
    </tbody>
  </table>

  <ul>
    <li>When the model was quite sure of the winner, they won.</li>
    <li>When the model wasn't too sure, accuracy dropped.</li>
  </ul>

  <p>
    When I ran the model predicting the margin of a game, there was a reasonable correlation between predicted and actual margin:
  </p>

  <div style="max-width: 600px; margin: 2em auto; text-align:center;">
    <div style="max-width:600px;margin:2em auto;">
        <canvas id="scatterPlot" width="600" height="400"></canvas>
    </div>
  </div>

  <p>
    My MAE (mean absolute error) was ~28 points off; this was a ~20% improvement on what the baseline MAE would be if you predicted 0 margin for each game (i.e., a draw).
  </p>

  <p>
    So, what does this all mean? Well, in a tipping competition I would be able to tip a little under 6.5 correct every round, and if I wanted to gamble I would probably end up making the bookmakers a lot of money.
  </p>
  <p>
    <strong>Are there ways to improve the model?</strong> Honestly, I think there are a couple ways:
  </p>
  <ul>
    <li>More in depth analysis of home ground advantage, especially specific grounds.</li>
    <li>Better analysis of player impact, combining age, geospatial data, and player synergy—this is probably a whole project in and of itself.</li>
  </ul>
  <p>
    Overall though, the model can consistently pick a winner, even if it does slightly underperform the level I thought it could achieve. Next steps are to build out a way to track performance over time.
  </p>
  <p>
    The full code for this project can be found on <a href="https://github.com/JoeWolfe12/AFL-data-analysis" target="_blank" rel="noopener">GitHub</a>.
  </p>
</div>
<script>
document.addEventListener("DOMContentLoaded", function () {
  // Parse JSON data
  const data = JSON.parse(document.getElementById('scatter-data').textContent);

  // Build array of {x, y} points for Chart.js scatter plot
  const points = data.actual.map((actual, idx) => ({
    x: actual,
    y: data.predicted[idx]
  }));

  // Create the scatter plot
  const ctx = document.getElementById('scatterPlot').getContext('2d');
  new Chart(ctx, {
    type: 'scatter',
    data: {
      datasets: [{
        label: 'Predicted vs Actual Margin',
        data: points,
        backgroundColor: 'rgba(75, 143, 220, 0.5)',
        pointRadius: 5
      }]
    },
    options: {
      plugins: {
        title: {
          display: true,
          text: 'Predicted vs Actual Margin'
        },
        legend: { display: false }
      },
      scales: {
        x: {
          title: { display: true, text: 'Actual Margin' },
          grid: { color: 'rgba(120,120,120,0.2)', borderDash: [5,5] }
        },
        y: {
          title: { display: true, text: 'Predicted Margin' },
          grid: { color: 'rgba(120,120,120,0.2)', borderDash: [5,5] }
        }
      },
      elements: {
        point: { borderWidth: 0 }
      }
    }
  });
});
</script>
